<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>비건 새우들깨 크림파스타 밀키트</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      body {
        scroll-behavior: smooth;
      }
      nav a.active {
        color: #15803d;
        font-weight: 700;
        border-bottom: 2px solid #15803d;
      }
      /* 장바구니 수량 input 너비 */
      .qty-input {
        width: 3rem;
        text-align: center;
        border: 1px solid #4ade80;
        border-radius: 0.25rem;
      }
    </style>
  </head>
  <body class="bg-green-50 text-gray-900">
    <header class="bg-gradient-to-r from-green-600 to-green-300 shadow-md">
      <div
        class="max-w-5xl mx-auto flex justify-between items-center px-6 py-4"
      >
        <h1 class="text-3xl font-extrabold text-white">놀면뭐하죠 팀</h1>
      </div>
    </header>

    <!-- 내비게이션 바 -->
    <nav
      class="fixed top-0 left-0 right-0 bg-white shadow-md z-50 flex justify-center space-x-8 py-4"
    >
      <a href="#home" class="text-green-700 hover:text-green-900 font-semibold"
        >홈</a
      >
      <a
        href="#description"
        class="text-green-700 hover:text-green-900 font-semibold"
        >상품 설명</a
      >
      <a
        href="#details"
        class="text-green-700 hover:text-green-900 font-semibold"
        >상세 정보</a
      >
      <a
        href="#reviews"
        class="text-green-700 hover:text-green-900 font-semibold"
        >후기</a
      >
      <a
        href="#inquiry"
        class="text-green-700 hover:text-green-900 font-semibold"
        >문의</a
      >
      <a
        href="#cart_section"
        class="text-green-700 hover:text-green-900 font-semibold"
        >장바구니</a
      >
    </nav>
    <main class="max-w-5xl mx-auto px-6 py-8">
      <section id="section_home">
        <h2 class="text-4xl font-bold mb-4">맛있고 건강한 비건 파스타</h2>
        <p class="text-lg mb-6">
          100% 식물성 재료로 만든 프리미엄 새우들깨 크림파스타 밀키트를
          만나보세요.
        </p>
      </section>
    </main>

    <main class="max-w-3xl mx-auto px-6 pt-28 pb-16">
      <!-- 홈 -->
      <section id="home" class="min-h-screen mb-16">
        <h1 class="text-3xl font-bold text-green-700 mb-4">
          비건 새우들깨 크림파스타 밀키트
        </h1>
        <p class="mb-4 text-gray-800">
          고소한 들깨크림과 탱글탱글한 식물성 새우가 어우러진 프리미엄 비건
          파스타.
        </p>
        <p class="mb-4 font-semibold text-red-600 text-xl">가격: 12,500원</p>

        <div class="flex items-center space-x-3 mb-6">
          <button
            id="qty-minus"
            class="px-3 py-1 rounded bg-green-200 hover:bg-green-300"
          >
            -
          </button>
          <input
            id="qty-input"
            type="number"
            min="1"
            value="1"
            class="w-14 text-center border border-green-300 rounded"
          />
          <button
            id="qty-plus"
            class="px-3 py-1 rounded bg-green-200 hover:bg-green-300"
          >
            +
          </button>
        </div>

        <button
          id="add-to-cart"
          class="bg-green-700 text-white py-3 px-6 rounded hover:bg-green-800 transition"
        >
          장바구니에 담기
        </button>
      </section>

      <!-- 상품 설명 -->
      <section id="description" class="mb-16">
        <h2 class="text-2xl font-semibold text-green-700 mb-4">상품 설명</h2>
        <p>
          식물성 재료로 만든 새우와 고소한 들깨크림의 완벽한 조합. 건강과 맛을
          모두 챙긴 비건 밀키트입니다.
        </p>
      </section>

      <!-- 상세 정보 -->
      <section id="details" class="mb-16">
        <h2 class="text-2xl font-semibold text-green-700 mb-4">상세 정보</h2>
        <ul class="list-disc list-inside">
          <li>중량: 300g</li>
          <li>유통기한: 제조일로부터 6개월</li>
          <li>보관방법: 냉동보관</li>
          <li>원재료: 식물성 새우, 들깨, 크림, 밀가루 등</li>
        </ul>
      </section>

      <!-- 후기 -->
      <section id="reviews" class="mb-16">
        <h2 class="text-2xl font-semibold text-green-700 mb-4">후기</h2>
        <div class="space-y-4">
          <div>
            <p class="font-semibold">홍길동</p>
            <p>
              진짜 맛있어요! 비건이라서 걱정했는데 들깨크림이 너무 고소해요.
            </p>
          </div>
          <div>
            <p class="font-semibold">김영희</p>
            <p>
              새우 식감이 신기하고 크림 파스타랑 잘 어울려요. 재구매 의사 100%
            </p>
          </div>
        </div>
      </section>

      <!-- 문의 -->
      <section id="inquiry" class="mb-16">
        <h2 class="text-2xl font-semibold text-green-700 mb-4">문의</h2>
        <form id="inquiry-form" class="space-y-4 max-w-lg">
          <div>
            <label for="name" class="block font-medium mb-1">이름</label>
            <input
              type="text"
              id="name"
              required
              class="w-full border border-green-300 rounded px-3 py-2"
            />
          </div>
          <div>
            <label for="email" class="block font-medium mb-1">이메일</label>
            <input
              type="email"
              id="email"
              required
              class="w-full border border-green-300 rounded px-3 py-2"
            />
          </div>
          <div>
            <label for="message" class="block font-medium mb-1"
              >문의 내용</label
            >
            <textarea
              id="message"
              rows="4"
              required
              class="w-full border border-green-300 rounded px-3 py-2"
            ></textarea>
          </div>
          <button
            type="submit"
            class="bg-green-700 text-white py-2 px-4 rounded hover:bg-green-800 transition"
          >
            문의 보내기
          </button>
        </form>
        <p
          id="inquiry-response"
          class="mt-3 text-green-700 font-semibold hidden"
        >
          문의가 성공적으로 전송되었습니다.
        </p>
      </section>

      <!-- 장바구니 -->
      <section
        id="cart_section"
        class="p-6 bg-white rounded shadow-lg min-h-screen"
      >
        <h2 class="text-2xl font-semibold text-green-700 mb-4">🛒 장바구니</h2>

        <ul id="cart-items" class="divide-y divide-gray-200 mb-6"></ul>

        <div class="flex justify-between items-center mb-6">
          <div class="text-xl font-bold text-gray-900">
            총 합계: <span id="cart-total">0</span>원
          </div>
          <button id="clear-cart" class="text-red-500 hover:text-red-700">
            전체 비우기
          </button>
        </div>

        <button
          id="checkout-btn"
          class="w-full bg-red-500 text-white py-3 rounded hover:bg-red-600 transition"
        >
          결제하기
        </button>
      </section>

      <!-- 결제 화면 (초기 숨김) -->
      <section
        id="checkout_section"
        class="p-6 bg-white rounded shadow-lg min-h-screen hidden"
      >
        <h2 class="text-2xl font-semibold text-green-700 mb-4">💳 결제하기</h2>
        <p class="mb-6">결제 정보를 입력해주세요.</p>
        <form id="payment-form" class="space-y-4 max-w-lg">
          <div>
            <label for="card-number" class="block font-medium mb-1"
              >카드 번호</label
            >
            <input
              type="text"
              id="card-number"
              required
              placeholder="1234 5678 9012 3456"
              class="w-full border border-green-300 rounded px-3 py-2"
            />
          </div>
          <div>
            <label for="expiry" class="block font-medium mb-1">유효기간</label>
            <input
              type="text"
              id="expiry"
              required
              placeholder="MM/YY"
              class="w-full border border-green-300 rounded px-3 py-2"
            />
          </div>
          <div>
            <label for="cvc" class="block font-medium mb-1">CVC</label>
            <input
              type="text"
              id="cvc"
              required
              placeholder="123"
              class="w-full border border-green-300 rounded px-3 py-2"
            />
          </div>
          <button
            type="submit"
            class="w-full bg-green-700 text-white py-3 rounded hover:bg-green-800 transition"
          >
            결제 완료
          </button>
        </form>
      </section>
    </main>

    <!-- 결제 완료 메시지 -->
    <div
      id="checkout-alert"
      class="fixed top-16 right-6 bg-green-600 text-white py-3 px-6 rounded shadow-lg hidden z-50"
    >
      ✅ 결제가 완료되었습니다!
    </div>

    <script>
      // 내비게이션 메뉴 활성화 토글
      const navLinks = document.querySelectorAll("nav a");

      function setActiveLink() {
        const scrollPos = window.scrollY + 100;

        navLinks.forEach((link) => {
          const section = document.querySelector(link.getAttribute("href"));
          if (!section) return;
          if (
            scrollPos >= section.offsetTop &&
            scrollPos < section.offsetTop + section.offsetHeight
          ) {
            link.classList.add("active");
          } else {
            link.classList.remove("active");
          }
        });
      }
      window.addEventListener("scroll", setActiveLink);
      setActiveLink();

      // 수량 조절, 장바구니 담기
      const qtyMinus = document.getElementById("qty-minus");
      const qtyPlus = document.getElementById("qty-plus");
      const qtyInput = document.getElementById("qty-input");
      const addToCartBtn = document.getElementById("add-to-cart");

      const cartSection = document.getElementById("cart_section");
      const cartItems = document.getElementById("cart-items");
      const cartTotal = document.getElementById("cart-total");
      const clearCartBtn = document.getElementById("clear-cart");
      const checkoutBtn = document.getElementById("checkout-btn");

      const checkoutSection = document.getElementById("checkout_section");
      const paymentForm = document.getElementById("payment-form");
      const checkoutAlert = document.getElementById("checkout-alert");

      const price = 12500;
      let cart = {};

      qtyMinus.addEventListener("click", () => {
        let val = parseInt(qtyInput.value);
        if (val > 1) qtyInput.value = val - 1;
      });
      qtyPlus.addEventListener("click", () => {
        let val = parseInt(qtyInput.value);
        qtyInput.value = val + 1;
      });

      // 장바구니 UI 업데이트 함수
      function updateCartUI() {
        cartItems.innerHTML = "";
        let total = 0;
        for (const [name, item] of Object.entries(cart)) {
          const li = document.createElement("li");
          li.className = "py-4 flex justify-between items-center";

          // 상품명 및 수량 컨트롤 박스
          const leftDiv = document.createElement("div");
          leftDiv.className = "flex items-center space-x-4";

          const nameDiv = document.createElement("div");
          nameDiv.textContent = name;
          nameDiv.className = "font-semibold";

          // 수량 input
          const qtyInput = document.createElement("input");
          qtyInput.type = "number";
          qtyInput.min = 1;
          qtyInput.value = item.qty;
          qtyInput.className = "qty-input";
          qtyInput.addEventListener("change", (e) => {
            let val = parseInt(e.target.value);
            if (isNaN(val) || val < 1) {
              val = 1;
              e.target.value = 1;
            }
            cart[name].qty = val;
            updateCartUI();
          });

          // 삭제 버튼
          const deleteBtn = document.createElement("button");
          deleteBtn.textContent = "삭제";
          deleteBtn.className = "text-red-500 hover:text-red-700 ml-4";
          deleteBtn.addEventListener("click", () => {
            delete cart[name];
            updateCartUI();
          });

          leftDiv.appendChild(nameDiv);
          leftDiv.appendChild(qtyInput);
          leftDiv.appendChild(deleteBtn);

          li.appendChild(leftDiv);

          // 가격
          const priceSpan = document.createElement("span");
          const subTotal = item.qty * item.price;
          priceSpan.textContent = `${subTotal.toLocaleString()}원`;
          priceSpan.className = "font-semibold";
          li.appendChild(priceSpan);

          total += subTotal;
          cartItems.appendChild(li);
        }

        cartTotal.textContent = total.toLocaleString();

        // 장바구니 비었으면 안내 문구와 버튼 비활성화 처리
        if (Object.keys(cart).length === 0) {
          cartItems.innerHTML = `<li class="text-center text-gray-500 py-10">장바구니가 비어있습니다.</li>`;
          checkoutBtn.disabled = true;
          checkoutBtn.classList.add("opacity-50", "cursor-not-allowed");
          clearCartBtn.disabled = true;
          clearCartBtn.classList.add("opacity-50", "cursor-not-allowed");
        } else {
          checkoutBtn.disabled = false;
          checkoutBtn.classList.remove("opacity-50", "cursor-not-allowed");
          clearCartBtn.disabled = false;
          clearCartBtn.classList.remove("opacity-50", "cursor-not-allowed");
        }
      }

      addToCartBtn.addEventListener("click", () => {
        const qty = parseInt(qtyInput.value);
        if (qty < 1) {
          alert("수량을 1개 이상 선택해주세요.");
          return;
        }
        const productName = "비건 새우들깨 크림파스타 밀키트";
        if (cart[productName]) {
          cart[productName].qty += qty;
        } else {
          cart[productName] = { qty: qty, price: price };
        }
        updateCartUI();

        // 장바구니 섹션으로 부드럽게 이동
        cartSection.scrollIntoView({ behavior: "smooth" });
      });

      clearCartBtn.addEventListener("click", () => {
        cart = {};
        updateCartUI();
      });

      // 결제 버튼 누르면 결제 섹션 보여주기 + 장바구니 숨기기
      checkoutBtn.addEventListener("click", () => {
        if (Object.keys(cart).length === 0) {
          alert("장바구니가 비어있습니다.");
          return;
        }
        cartSection.classList.add("hidden");
        checkoutSection.classList.remove("hidden");
        checkoutSection.scrollIntoView({ behavior: "smooth" });
      });

      // 결제 폼 제출
      paymentForm.addEventListener("submit", (e) => {
        e.preventDefault();

        // 여기서 결제 로직(서버 연동 등)이 들어갈 수 있음
        // 지금은 결제 성공 메시지 보여주고, 장바구니 초기화 및 UI 복원 처리

        checkoutSection.classList.add("hidden");
        cart = {};
        updateCartUI();

        // 장바구니 다시 보여주기
        cartSection.classList.remove("hidden");
        cartSection.scrollIntoView({ behavior: "smooth" });

        checkoutAlert.classList.remove("hidden");
        setTimeout(() => {
          checkoutAlert.classList.add("hidden");
        }, 3000);

        // 결제 폼 리셋
        paymentForm.reset();
      });

      // 문의 폼 제출 (임시)
      const inquiryForm = document.getElementById("inquiry-form");
      const inquiryResponse = document.getElementById("inquiry-response");
      inquiryForm.addEventListener("submit", (e) => {
        e.preventDefault();
        inquiryResponse.classList.remove("hidden");
        setTimeout(() => {
          inquiryResponse.classList.add("hidden");
        }, 3000);
        inquiryForm.reset();
      });

      // 초기 UI 세팅
      updateCartUI();
    </script>
  </body>
</html>
